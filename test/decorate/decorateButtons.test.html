<!DOCTYPE html>
<html lang="en">
  <body>
    <div>
      <h1 id="congrats-you-are-ready-to-go">Congrats, you are ready to go!</h1>
      <p>Your forked repo is set up as an AEM Project and you are ready to start developing.</p>
      <p>The content you are looking at is served from this <a href="https://drive.google.com/drive/folders/1MGzOt7ubUh3gu7zhZIPb7R7dyRzG371j?usp=sharing">Google Drive</a></p>
      <p>Adjust the <code>fstab.yaml</code> to point to a folder either in your sharepoint or your gdrive that you shared with AEM. See the full tutorial here:</p>
      <p><a href="https://www.aem.live/developer/tutorial">https://www.aem.live/developer/tutorial</a></p>
      <h2 id="this-is-another-headline-here-for-more-content">This is another headline here for more content</h2>
      <p><a href="/"><span class="icon icon-search"></span>Default Button with Icon</a></p>
      <p><strong><a href="/">Primary Button</a></strong></p>
      <p><em><a href="/">Secondary Button</a></em></p>
      <p><a href="/">Mix of</a> <strong><a href="/">B</a></strong> <a href="/">and</a> <em><a href="/">I</a></em> <a href="/">Button</a></p>
      <p><a href="/">Partial</a> <strong><a href="/">Primary</a></strong> <a href="/">Button</a></p>
      <p><a href="/">Partial</a> <em><a href="/">Secondary</a></em> <a href="/">Button</a></p>
      <ol>
        <li><a href="/">Link in…</a></li>
        <li><a href="/">…a default content list</a></li>
        <li>But what about a<br><a href="/">line break</a>?</li>
      </ol>
      <h2 id="this-is-another-headline-here-for-even-more-content">This is another headline here for even more content</h2>
      <div class="columns">
        <div>
          <div>
            <p>This is a column cell with an <a href="/">inline link</a>.</p>
            <p><strong><a href="/">And a Button</a></strong></p>
            <p><em><a href="/">And Another Button</a></em></p>
            <p><a href="/"><span class="icon icon-search"></span>And an Icon Button</a></p>
          </div>
          <div>
            <p>This is a column cell with a button:</p>
            <p><a href="/">Developer Tutorial</a></p>
          </div>
        </div>
        <div>
          <div><a href="/">Lonely Button</a></div>
          <div>
            <ul>
              <li><a href="/">Links</a></li>
              <li><a href="/">AS</a></li>
              <li><a href="/">A</a></li>
              <li><a href="/">List</a></li>
              <li>But also a <a href="/">link IN a list</a></li>
            </ul>
          </div>
        </div>
        <div>
          <div><strong><a href="/">Lonely Primary Button</a></strong></div>
          <div><em><a href="/">Lonely Secondary Button</a></em></div>
        </div>
      </div>
    </div>
  </body>
  <script type="module">
    /* eslint-env mocha */
    import { runTests } from '@web/test-runner-mocha';
    import { expect } from '@esm-bundle/chai';
    import { decorateButtons } from '../../src/decorate.js';

    runTests(() => {
      it('decorates buttons', () => {
        const { body } = document;
        decorateButtons(body);
        body.querySelectorAll('a[href]').forEach((a) => {
          const inList = a.closest('li');
          const p = a.closest('p');
          if (inList) {
            // links in lists are not decorated as buttons
            expect(a.classList.contains('button')).to.be.false;
          } else {
            // all non-list links should be wrapped in a containing p
            expect(p).to.exist;
            if (a.href !== a.textContent) {
              // links with matching href and text are not decorated as buttons
              if (a.textContent !== p.textContent) {
                // inline links are not decorated as buttons
                expect(p.classList.contains('button-container')).to.be.false;
                expect(a.classList.contains('button')).to.be.false;
              } else {
                expect(p.childNodes.length).to.equal(1);
                expect(p.classList.contains('button-container')).to.be.true;
                expect(a.classList.contains('button')).to.be.true;
                // links wrapped in or containing a strong tag are decorated as primary buttons
                if (p.querySelector('strong')) expect(a.classList.contains('primary')).to.be.true;
                // links wrapped in or containing an em tag are decorated as secondary buttons
                if (p.querySelector('em')) expect(a.classList.contains('secondary')).to.be.true;
              }
            } else {
              expect(p.classList.contains('button-container')).to.be.false;
              expect(a.classList.contains('button')).to.be.false;
            }
          }
        });
      });
    });
  </script>
</html>